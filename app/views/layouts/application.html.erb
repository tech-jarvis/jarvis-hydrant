<!DOCTYPE html>
<html>
  <head>
    <title>Adopt a Hydrant</title>
    <%= stylesheet_link_tag "main" %>
    <%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" %>
    <%= javascript_include_tag "http://maps.google.com/maps/api/js?sensor=false" %>
    <%= javascript_include_tag "snowstorm" %>
    <script type="text/javascript">
    $(function() {
      var map;
      var latlng = new google.maps.LatLng(<%= @lat %>, <%= @lng %>);
      var myOptions = {
        zoom: <%= @zoom %>,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

      var redMarker = '/images/markers/red.png';
      var greenMarker = '/images/markers/green.png';
<% @hydrants.each do |hydrant| %>
      var h<%= hydrant.city_id %>LatLng = new google.maps.LatLng(<%= hydrant.lat %>, <%= hydrant.lng %>);
      var h<%= hydrant.city_id %>Marker = new google.maps.Marker({
          position: h<%= hydrant.city_id %>LatLng,
          map: map,
          icon: <%= hydrant.user_id ? "greenMarker" : "redMarker" %>
      });
<% end %>
    })
    </script>
    <%= csrf_meta_tag %>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  </head>
  <body>
    <%= yield -%>
  </body>
</html>
